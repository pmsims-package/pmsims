<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>How pmsims works • pmsims</title>
<!-- mathjax math --><script src="https://cdn.jsdelivr.net/npm/mathjax@3.2.2/es5/tex-mml-chtml.js" integrity="sha256-MASABpB4tYktI2Oitl4t+78w/lyA+D7b/s9GEP0JOGI=" crossorigin="anonymous"></script><script>
  window.MathJax = {
    chtml: {
      fontURL: "https://cdn.jsdelivr.net/npm/mathjax@3.2.2/es5/output/chtml/fonts/woff-v2"
    }
  };
</script><script src="../lightswitch.js"></script><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="How pmsims works">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top " aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">pmsims</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.0.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/about.html">How pmsims works</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/pmsims-package/pmsims/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-lightswitch" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true" aria-label="Light switch"><span class="fa fa-sun"></span></button>
  <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="dropdown-lightswitch">
<li><button class="dropdown-item" data-bs-theme-value="light"><span class="fa fa-sun"></span> Light</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="dark"><span class="fa fa-moon"></span> Dark</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="auto"><span class="fa fa-adjust"></span> Auto</button></li>
  </ul>
</li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>How pmsims works</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/pmsims-package/pmsims/blob/HEAD/vignettes/articles/about.Rmd" class="external-link"><code>vignettes/articles/about.Rmd</code></a></small>
      <div class="d-none name"><code>about.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="overview">Overview<a class="anchor" aria-label="anchor" href="#overview"></a>
</h2>
<p><strong>pmsims</strong> estimates the minimum sample size needed for
a prediction model to achieve adequate performance with high probability
(“assurance”). It does this by simulating datasets, fitting models,
evaluating performance, and tracing how performance improves as the
sample size grows — a <em>learning curve</em>.</p>
<hr>
</div>
<div class="section level2">
<h2 id="conceptual-background">1. Conceptual background<a class="anchor" aria-label="anchor" href="#conceptual-background"></a>
</h2>
<p>Prediction models must be trained on enough data to generalise beyond
the development sample. Inadequate sample sizes lead to
<strong>overfitting</strong>, unstable estimates, and poor calibration.
Traditional heuristics (e.g., <em>10 events per variable</em>) ignore
factors such as outcome prevalence, predictor strength, and model
complexity. Analytic formulae (e.g., <em>pmsampsize</em>) rely on
assumptions that often fail for modern models.</p>
<p><strong>Simulation-based approaches</strong>, like pmsims, overcome
these limitations by explicitly generating data and empirically
assessing model behaviour across different training sizes.</p>
<hr>
</div>
<div class="section level2">
<h2 id="the-pmsims-workflow">2. The pmsims workflow<a class="anchor" aria-label="anchor" href="#the-pmsims-workflow"></a>
</h2>
<p>The package operationalises the simulation-based framework in four
modular steps:</p>
<div class="section level4">
<h4 id="define-the-simulation-scenario">(1) Define the simulation scenario<a class="anchor" aria-label="anchor" href="#define-the-simulation-scenario"></a>
</h4>
<p>Specify: - <strong>Data generator</strong> — how predictors and
outcomes are simulated (continuous, binary, or time-to-event) -
<strong>Model function</strong> — the model to be fitted (e.g. logistic
regression, penalised regression, ML) - <strong>Metric function</strong>
— one or more performance measures (AUC, calibration slope, etc.)</p>
<p>You also set the <strong>target performance</strong> (e.g. AUC ≥
0.75) and an <strong>assurance level</strong> (e.g. 80% probability that
performance ≥ target).</p>
</div>
<div class="section level4">
<h4 id="tune-the-data-generator">(2) Tune the data generator<a class="anchor" aria-label="anchor" href="#tune-the-data-generator"></a>
</h4>
<p>The data-generating process is adjusted so that, for large simulated
datasets, the chosen model reaches the specified target performance.
This ensures simulations reflect realistic population
characteristics.</p>
</div>
<div class="section level4">
<h4 id="estimate-the-learning-curve">(3) Estimate the learning curve<a class="anchor" aria-label="anchor" href="#estimate-the-learning-curve"></a>
</h4>
<p>Synthetic datasets of increasing size are generated. For each sample
size: - Fit the model on training data. - Evaluate performance on
independent test data. - Repeat across many simulated datasets.</p>
<p>To reduce computation, pmsims uses <strong>Gaussian Process (GP)
surrogate modelling</strong> (via <code>mlpwr</code>) to interpolate
smooth learning curves from a limited number of simulation points,
focusing computational effort where the solution is likely to lie.</p>
</div>
<div class="section level4">
<h4 id="determine-the-minimum-sample-size">(4) Determine the minimum sample size<a class="anchor" aria-label="anchor" href="#determine-the-minimum-sample-size"></a>
</h4>
<p>The learning curve is used to identify the smallest <code>n</code>
where the chosen quantile (e.g. 20th percentile) of performance exceeds
the target value. This gives the required training size for which the
model is expected to achieve adequate performance in at least 80% of
cases.</p>
<hr>
</div>
</div>
<div class="section level2">
<h2 id="interpretation">3. Interpretation<a class="anchor" aria-label="anchor" href="#interpretation"></a>
</h2>
<p>Two complementary criteria can be applied:</p>
<ul>
<li>
<strong>Mean-based</strong> — target achieved <em>on average</em>
across replications</li>
<li>
<strong>Assurance-based</strong> — target achieved in <em>most</em>
replications (e.g., 80%)</li>
</ul>
<p>Assurance is typically preferred for study planning, since it
accounts for model instability and data variability.</p>
<hr>
</div>
<div class="section level2">
<h2 id="why-simulations">4. Why simulations?<a class="anchor" aria-label="anchor" href="#why-simulations"></a>
</h2>
<p>Simulations capture multiple sources of randomness:</p>
<table class="table">
<colgroup>
<col width="15%">
<col width="26%">
<col width="57%">
</colgroup>
<thead><tr>
<th>Source</th>
<th>Description</th>
<th>Mitigated by increasing <em>n</em>?</th>
</tr></thead>
<tbody>
<tr>
<td>Irreducible outcome error</td>
<td>Intrinsic variability in outcomes</td>
<td>✖</td>
</tr>
<tr>
<td>Training data variability</td>
<td>Different samples yield different models</td>
<td>✔</td>
</tr>
<tr>
<td>Model-fitting randomness</td>
<td>Stochastic optimisation paths (e.g. ML)</td>
<td>Partial</td>
</tr>
<tr>
<td>Validation data variability</td>
<td>Finite validation sample</td>
<td>Related problem</td>
</tr>
</tbody>
</table>
<hr>
</div>
<div class="section level2">
<h2 id="flexibility-and-extensibility">5. Flexibility and extensibility<a class="anchor" aria-label="anchor" href="#flexibility-and-extensibility"></a>
</h2>
<p>Because <strong>pmsims</strong> separates <em>data generation</em>,
<em>model fitting</em>, and <em>performance assessment</em>, it can be
adapted to: - regression or ML models - binary, continuous, or survival
outcomes - user-defined metrics - synthetic or pilot-based data
generation</p>
<p>Planned extensions include: - hierarchical or longitudinal data
structures - missing data mechanisms - fairness and subgroup stability
analyses</p>
<hr>
</div>
<div class="section level2">
<h2 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a>
</h2>
<p>For a detailed methodological background, see:</p>
<p>Shamsutdinova D et al. (2025). <em>Sample Size Calculations for
Clinical Prediction Modelling: Conceptualisation and Simulation-Based
Approach.</em> King’s College London, Department of Biostatistics &amp;
Health Informatics.</p>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Ewan Carr, Gordon Forbes, Ridwan Olaniran, Diana Shamsutdinova, Daniel Stahl, Sarah Markham, Felix Zimmer.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer>
</div>





  </body>
</html>
